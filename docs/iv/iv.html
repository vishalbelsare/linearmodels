

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Instrumental Variable Model Specification &mdash; linearmodels 0.1+12.ga25a15c documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="linearmodels 0.1+12.ga25a15c documentation" href="../index.html"/>
        <link rel="up" title="Instrumental Variable Estimation" href="index.html"/>
        <link rel="next" title="Instrumental Variable Module Reference" href="reference.html"/>
        <link rel="prev" title="Instrumental Variable Estimation" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> linearmodels
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Instrumental Variable Estimation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Instrumental Variable Model Specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#two-stage-least-squares">Two stage-least squares</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limited-information-maximum-likelihood-liml-and-k-class-estiamtion">Limited Information Maximum Likelihood (LIML) and k-class Estiamtion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generalized-method-of-moments-gmm-estimation">Generalized Method of Moments (GMM) Estimation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#continuously-updating-gmm-estimation">Continuously Updating GMM Estimation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html">Instrumental Variable Module Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="instrumental-variable-estimation.html">Instrumental Variable Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="wooldridge-iv-estimation.html">Instrumental Variables estimation and two Stage Least Squares</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimators.html">Mathematical Formulas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../panel/panel.html">Panel Module Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utility.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plan.html">Module Plans</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">linearmodels</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Instrumental Variable Estimation</a> &raquo;</li>
        
      <li>Instrumental Variable Model Specification</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/iv/iv.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="instrumental-variable-model-specification">
<h1>Instrumental Variable Model Specification<a class="headerlink" href="#instrumental-variable-model-specification" title="Permalink to this headline">¶</a></h1>
<p>Instrumental variable models are used when regressors are endogenous
or there is measurement error on the variable.  These models make use of
instruments which are correlated with the endogenous variable but not
with the model error. All model estimated by this package can be described
as</p>
<div class="math">
\[\begin{split}y_i    &amp; = x_{1i}\beta_1 + x_{2i}\beta_2 + \epsilon_i \\
x_{2i} &amp; = z_{1i}\delta + z_{2i}\gamma + \nu_i\end{split}\]</div>
<p>In this expression, <span class="math">\(x_{1i}\)</span> is a set of <span class="math">\(k_1\)</span> regressors that
are exogenous while <span class="math">\(x_{2i}\)</span> is a set of <span class="math">\(k_2\)</span> regressors that are
endogenous in the sense that <span class="math">\(Cov(x_{2i},\epsilon_i)\neq 0\)</span>. The <span class="math">\(p\)</span>
element vector <span class="math">\(z_i\)</span> are instruments that explain <span class="math">\(x_{2i}\)</span> but not
<span class="math">\(y_i\)</span>.</p>
<p>There are four estimation methods available to fit models of this type.  All accept the
same four required inputs:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">dependent</span></code> - The variable to be modeled, <span class="math">\(y_i\)</span> in the model</li>
<li><code class="docutils literal"><span class="pre">exog</span></code> - The exogenous regressors, <span class="math">\(x_{1i}\)</span> in the model. Note
that <span class="math">\(x_{1i}\)</span> and <span class="math">\(z_{1i}\)</span> are the same since variables are
also valid to use when projecting the endogenous variables.</li>
<li><code class="docutils literal"><span class="pre">endog</span></code> - The endogenous regressors, <span class="math">\(x_{2i}\)</span> in the model</li>
<li><code class="docutils literal"><span class="pre">instruments</span></code> - The instruments, <span class="math">\(z_{2i}\)</span> in the model</li>
</ul>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="kn">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">linearmodels.iv</span> <span class="kn">import</span> <span class="n">IV2SLS</span>
<span class="kn">from</span> <span class="nn">linearmodels.datasets</span> <span class="kn">import</span> <span class="n">wage</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">wage</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">dependent</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">wage</span><span class="p">)</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">exper</span><span class="p">)</span>
<span class="n">endog</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">educ</span>
<span class="n">instruments</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sibs</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">dependent</span><span class="p">,</span> <span class="n">exog</span><span class="p">,</span> <span class="n">endog</span><span class="p">,</span> <span class="n">instruments</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s1">&#39;unadjusted&#39;</span><span class="p">)</span>
<span class="n">res</span>

                          <span class="n">IV</span><span class="o">-</span><span class="mi">2</span><span class="n">SLS</span> <span class="n">Estimation</span> <span class="n">Summary</span>
 <span class="o">==============================================================================</span>
 <span class="n">Dep</span><span class="o">.</span> <span class="n">Variable</span><span class="p">:</span>                   <span class="n">wage</span>   <span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>                    <span class="mf">0.045876</span>
 <span class="n">No</span><span class="o">.</span> <span class="n">Observations</span><span class="p">:</span>                 <span class="mi">934</span>   <span class="n">Adj</span><span class="o">.</span> <span class="n">R</span><span class="o">-</span><span class="n">squared</span><span class="p">:</span>               <span class="mf">0.043826</span>
 <span class="n">Date</span><span class="p">:</span>                <span class="n">Fri</span><span class="p">,</span> <span class="n">Mar</span> <span class="mi">10</span> <span class="mi">2017</span>   <span class="n">F</span><span class="o">-</span><span class="n">statistic</span><span class="p">:</span>                    <span class="mf">23.872</span>
 <span class="n">Time</span><span class="p">:</span>                        <span class="mi">14</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mo">00</span>   <span class="n">F</span><span class="o">-</span><span class="n">stat</span> <span class="n">dist</span><span class="p">:</span>                   <span class="n">chi2</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                                         <span class="n">F</span><span class="o">-</span><span class="n">stat</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span><span class="p">:</span>                 <span class="mf">0.0000</span>

                              <span class="n">Parameter</span> <span class="n">Estimates</span>
 <span class="o">==============================================================================</span>
            <span class="n">Parameters</span>  <span class="n">Std</span><span class="o">.</span> <span class="n">Err</span><span class="o">.</span>     <span class="n">T</span><span class="o">-</span><span class="n">stat</span>    <span class="n">P</span><span class="o">-</span><span class="n">value</span>    <span class="n">Lower</span> <span class="n">CI</span>    <span class="n">Upper</span> <span class="n">CI</span>
 <span class="o">------------------------------------------------------------------------------</span>
 <span class="n">const</span>          <span class="mf">4.4912</span>    <span class="mf">0.46921</span>     <span class="mf">9.5719</span>     <span class="mf">0.0000</span>     <span class="p">[</span><span class="mf">3.5716</span>     <span class="mf">5.4108</span><span class="p">]</span>
 <span class="n">exper</span>        <span class="mf">0.034138</span>   <span class="mf">0.007318</span>     <span class="mf">4.6649</span>     <span class="mf">0.0000</span>   <span class="p">[</span><span class="mf">0.019795</span>   <span class="mf">0.048481</span><span class="p">]</span>
 <span class="n">educ</span>          <span class="mf">0.14055</span>   <span class="mf">0.029018</span>     <span class="mf">4.8434</span>     <span class="mf">0.0000</span>   <span class="p">[</span><span class="mf">0.083672</span>    <span class="mf">0.19742</span><span class="p">]</span>
 <span class="o">==============================================================================</span>

 <span class="n">Instrumented</span><span class="p">:</span> <span class="n">educ</span>
 <span class="n">Instruments</span><span class="p">:</span> <span class="n">sibs</span>
 <span class="n">Covariance</span> <span class="n">estimator</span><span class="p">:</span> <span class="n">unadjusted</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">linearmodels.iv</span> <span class="kn">import</span> <span class="n">IV2SLS</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">endog</span><span class="p">,</span> <span class="n">exog</span><span class="p">,</span> <span class="n">instrumented</span><span class="p">,</span> <span class="n">instruments</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
<p>The usage is similar in spirit to <a class="reference external" href="http://www.statsmodels.org/dev/generated/statsmodels.regression.linear_model.OLS.html#statsmodels.regression.linear_model.OLS" title="(in statsmodels v0.8.0)"><code class="xref py py-class docutils literal"><span class="pre">statsmodels.regression.linear_model.OLS</span></code></a>.
The estimator will reduce to OLS when <code class="docutils literal"><span class="pre">instruments</span></code> is equal to <code class="docutils literal"><span class="pre">instrumented</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">linearmodels.iv</span> <span class="kn">import</span> <span class="n">IV2SLS</span>
<span class="n">ols_mod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">endog</span><span class="p">,</span> <span class="n">exog</span><span class="p">,</span> <span class="n">instrumented</span><span class="p">,</span> <span class="n">instrumented</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">ols_mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="two-stage-least-squares">
<h2>Two stage-least squares<a class="headerlink" href="#two-stage-least-squares" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="limited-information-maximum-likelihood-liml-and-k-class-estiamtion">
<h2>Limited Information Maximum Likelihood (LIML) and k-class Estiamtion<a class="headerlink" href="#limited-information-maximum-likelihood-liml-and-k-class-estiamtion" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="generalized-method-of-moments-gmm-estimation">
<h2>Generalized Method of Moments (GMM) Estimation<a class="headerlink" href="#generalized-method-of-moments-gmm-estimation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="continuously-updating-gmm-estimation">
<h2>Continuously Updating GMM Estimation<a class="headerlink" href="#continuously-updating-gmm-estimation" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference.html" class="btn btn-neutral float-right" title="Instrumental Variable Module Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Instrumental Variable Estimation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Kevin Sheppard.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1+12.ga25a15c',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>